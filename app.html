<!DOCTYPE html>
<html>
<head>
    <title>Location based AR</title>
    <script src='https://aframe.io/releases/0.9.2/aframe.min.js'></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>

</head>

<script>

    var places;
    // Set max/min coordinates to interact in a smaller area
    var maxLat = 51.964926;
    var minLat = 51.962097;
    var maxLon = 7.629562;
    var minLon = 7.621632;

    window.onload = () => {
     fetch('https://raw.githubusercontent.com/snavas/InteractionWithGeoinformation/master/assets/osmtrees.geojson')
     .then(response => response.json())
     .then(data => places = data );

      setTimeout(() => {
        scene = document.querySelector('a-scene');
	    places.features.forEach((place) => {
	    const latitude = place.geometry.coordinates[1];
	    const longitude = place.geometry.coordinates[0];
        // just add trees of selected area
        if(latitude < maxLat && latitude > minLat && longitude < maxLon && longitude > minLon){

            const icon = document.createElement('a-text');
	       icon.setAttribute('gps-entity-place', `latitude: ${latitude}; longitude: ${longitude}`);
           icon.setAttribute('look-at', '[gps-camera]');
           icon.setAttribute('scale', '10 10 10');
            icon.setAttribute('value', 'X');
	       scene.appendChild(icon);
       }
        else{};
      });
      distanceMsg = document.querySelector('[gps-entity-place]').getAttribute('distance');

     }, 1000);
    };


</script>


<body style="margin : 0px; overflow: hidden;">
    <a-scene cursor="rayOrigin: mouse; fuse: true; fuseTimeout: 0;"
      raycaster="objects: [clickable];" embedded arjs>

<!--
	<a-camera gps-camera="simulateLatitude: 51.963538; simulateLongitude: 7.63436; minDistance: 1; maxDistance: 30" rotation-reader> </a-camera>-->
	<a-camera gps-camera="minDistance: 1; maxDistance: 300" rotation-reader> </a-camera> 

   </a-scene>

</body>

</html>
